<%- include('partials/header.ejs') %>
<body id="page-top">
  <!-- Page Wrapper -->
  <div id="wrapper">
    <!-- Sidebar -->

    <%- include('partials/side.ejs') %>

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">
      <!-- Main Content -->
      <div id="content">
        <!-- Sidebar Toggle (Topbar) -->
        <button
          id="sidebarToggleTop"
          class="btn btn-link d-md-none rounded-circle mr-3"
        >
          <i class="fa fa-bars"></i>
        </button>
        <!-- Begin Page Content -->
        <div class="container-fluid">
                  <!--  Start Header -->
                  <div
                  class="d-sm-flex align-items-center justify-content-between mb-4 mt-4"
                >
                  <h1 class="h3 mb-0 text-gray-800">Show payments</h1>
        
                </div>

                <!--End header-->    
                <!-- form date-->
                <div class="container">
                    <form autocomplete="off" method = "post" action="/payment">
                      <div class="flex-row d-flex justify-content-center">
                        <div class="col-lg-6 col-11 px-1">
                          <div class="input-group input-daterange">
                            <input type="date" placeholder = "Start date" id="date1" name="date1"  class="form-control text-left mr-2">
                            <input type="date" placeholder = "End date" id="date2"  name="date2"  class="form-control text-left ml-2">
                            <input type="submit" class="btn btn-sm btn-success" name="submit" id="submit" value="Submit" />
                          </div>
                        </div>
                      </div> 
                    </form>
                  </div>
                <!-- form date-->

            <div class="card-body">
              <div class="table-responsive">
            <table
            class="table table-bordered"
            id="dataTable"
            width="100%"
            cellspacing="0"
          >
            <thead>
              <tr>
                <th>Name</th>
                <th>event name</th>
                <th>event date/time</th>
                <th>paid date/time</th>
                <th>Fee</th>
              </tr>
            </thead>  
            <tbody>
            <%let totalAcc = 0%>
            <% payments.forEach((i) => { %>
                <%totalAcc += Number(i.fee) %>          
              <tr>
                <td><%= i.fullName %></td>
                <td><%= i.eventName %></td>
                <td><%= i.eventDate %> <br/> <%= i.eventTime %></td>
                <td><%= i.bookingDate %></td>
                <td>$<%= i.fee %></td>
           
            <% }) %>
         </tbody>
         <tfoot>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td>Sum: </td>
                <td>$<%=totalAcc%></td>
               
              </tr>
         </tfoot>
          </table>
        </div>
      </div>

      </div>
      <!-- End of Main Content -->
    </div>
    <!-- End of Content Wrapper -->
    <%- include('partials/footer.ejs') %>
  </div>
</body>
